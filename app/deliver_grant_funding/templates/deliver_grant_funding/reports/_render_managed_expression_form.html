{% from "govuk_frontend_jinja/components/button/macro.html" import govukButton %}

{% macro render_managed_expression_form(form, label_html, submit_label, ff_show_custom_expression_option, grant_id, question_id) %}
  <form method="post" novalidate>
    {{ form.csrf_token }}

    {{
      form.type(params={
      "fieldset": {
          "legend": {
          "html": label_html,
          "classes": "govuk-fieldset__legend--m",
          "isPageHeading": False
          },
      },
      "items": form.get_managed_expression_radio_conditional_items()
      })
    }}

    {{ form.submit(params={"text": submit_label}) }}
    {% if ff_show_custom_expression_option %}
      {{
        govukButton({
          "text": "Create a custom expression",
          "classes": "govuk-button--secondary",
          "href": url_for("deliver_grant_funding.add_custom_question_validation", grant_id=grant_id, question_id=question_id)
        })
      }}
    {% endif %}
  </form>
{% endmacro %}
