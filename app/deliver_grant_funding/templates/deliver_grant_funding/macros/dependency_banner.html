{% from "govuk_frontend_jinja/components/notification-banner/macro.html" import govukNotificationBanner %}

{% macro dependency_banner(error) %}
  {% set question_link = url_for("deliver_grant_funding.edit_question", grant_id=error.grant_id, question_id=error.question_id) %}
  {% set depends_on_link = url_for("deliver_grant_funding.edit_question", grant_id=error.grant_id, question_id=error.depends_on_question_id) %}


  {% set banner_html %}
    <p class="govuk-body govuk-!-font-weight-bold">{{ error.message }}</p>
    <p class="govuk-body govuk-!-font-weight-bold">
      Question:
      <a class="govuk-notification-banner__link" href="{{ question_link }}">{{ error.question_text }}</a>
    </p>
    <p class="govuk-body govuk-!-font-weight-bold">
      Depends on the answer to:
      <a class="govuk-notification-banner__link" href="{{ depends_on_link }}">{{ error.depends_on_question_text }}</a>
    </p>
    {% if "depends_on_items_text" in error %}
      <p class="govuk-body govuk-!-font-weight-bold">Depends on the options: {{ error.depends_on_items_text }}</p>
    {% endif %}
  {% endset %}

  {{ govukNotificationBanner(params={"role": "alert", "titleText": "Error", "classes": "app-notification-banner--destructive", "html": banner_html}) }}
{% endmacro %}
