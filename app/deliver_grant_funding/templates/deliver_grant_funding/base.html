{% extends "common/base.html" %}
{% from "common/partials/mhclg-header.html" import mhclgHeader %}
{% from "govuk_frontend_jinja/components/error-summary/macro.html" import govukErrorSummary %}
{% from "common/partials/navigation.html" import deliverGrantFundingServiceNavigation %}

{% set nav_items = nav_items or [] %}
{% set right_nav_items = right_nav_items or [] %}

{% block pageTitle %}{{ page_title }} - Deliver grant funding{% endblock pageTitle %}

{% block header %}
  {{
    mhclgHeader(
      params={
        "productName": "Deliver grant funding",
        "homepageUrl": url_for("deliver_grant_funding.list_grants"),
        "assetPath": assetPath
      },
      currentUser=current_user,
    )
  }}

  {% if grant %}
    <div class="app-grant-navigation">
      <div class="app-grant-navigation__container">
        <span class="app-grant-navigation__name govuk-!-font-weight-bold">{{ grant.name }}</span>
        {% if authorisation_helper.is_platform_admin(current_user) %}
          {# We also need to show this is a grant team member has access to >1 grant #}
          <span class="app-grant-navigation__action"><a class="govuk-link govuk-link--no-visited-state govuk-link--no-underline" href="{{ url_for('deliver_grant_funding.list_grants') }}">Change grant</a></span>
        {% endif %}
      </div>
    </div>
  {% endif %}

  {{ deliverGrantFundingServiceNavigation(nav_items, right_nav_items) }}
{% endblock header %}

{% block main %}
  <div {% if show_watermark %}class="app-watermark-container"{% endif %}>
    <div class="govuk-width-container {% if containerClasses %}{{ containerClasses }}{% endif %}">
      {% block beforeContent %}{% endblock %}
      <div class="govuk-main-wrapper {% if mainClasses %}{{ mainClasses }}{% endif %}">
        {% block mainWrapper %}
          <main id="main-content" {% if mainLang %}lang="{{ mainLang }}"{% endif %}>
            {% block errorSummary %}
              <div class="govuk-grid-row">
                <div class="govuk-grid-column-two-thirds">
                  {% if form is defined and form.errors %}
                    {{ govukErrorSummary(wtforms_errors(form)) }}
                  {% endif %}
                </div>
              </div>
            {% endblock errorSummary %}

            {% block content %}
            {% endblock content %}
          </main>
        {% endblock mainWrapper %}
      </div>
    </div>
  </div>
{% endblock %}
