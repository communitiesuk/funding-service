{% extends "deliver_grant_funding/grant_base.html" %}
{% from "govuk_frontend_jinja/components/back-link/macro.html" import govukBackLink %}

{% set page_title = "Add a question - " ~ db_form.title %}
{% set active_item_identifier = "developers" %}

{% block beforeContent %}
  {{
    govukBackLink({
        "text": "Back",
        "href": url_for("developers.deliver.choose_question_type", grant_id = grant.id, collection_id=collection.id, section_id=section.id, form_id=db_form.id, question_data_type=chosen_question_data_type.name, back_link="manage_section")
    })
  }}
{% endblock beforeContent %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-l">Add question</h1>
      <dl class="govuk-body govuk-!-margin-bottom-6">
        <dt class="govuk-body govuk-!-margin-bottom-1">Question type</dt>
        <dd class="govuk-summary-list__value">{{ chosen_question_data_type.value }}</dd>
      </dl>

      <form id="generate-question-form" class="govuk-!-display-none">
        {{ form.csrf_token }}
        <input id="collection" name="collection" type="text" value="{{ collection.name }}"/>
        <input id="section" name="section" type="text" value="{{ section.title }}"/>
        <input id="form" name="form" type="text" value="{{ db_form.title }}"/>
      </form>

      <form method="post" novalidate>
        {{ form.csrf_token }}
        {{ form.text }}
        {{ form.name(params={"attributes": {"data-fs-module": "generate-question-name", "data-fs-module-target-input-id": form.text.id, "data-fs-module-form-id": "generate-question-form", "data-fs-module-target-output-id": form.name.id } }) }}
        {{ form.hint }}

        {% if chosen_question_data_type == enum.question_type.RADIOS %}
          {{ form.data_source_items }}
        {% endif %}

        {{ form.submit }}
      </form>
    </div>
  </div>
{% endblock content %}
